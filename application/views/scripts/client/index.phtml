

	<script>
		var clientData = <?= Zend_Json::encode($this->entries) ?>;
		//console.log(clientData);
		Ext.require([
		    'Ext.grid.*',
		    'Ext.data.*',
		    'Ext.util.*',
		    'Ext.state.*',
		    'Ext.form.*'
		]);


		Ext.define('ClientModel', {
				extend: 'Ext.data.Model',
				fields: [
						/*{ name: 'selected', type: 'bool' },*/
						'id',
						'name',
						'nit',
						'tel01',
						'comment'
				]
		});

		var store = Ext.create('Ext.data.Store', {
				storeId: 'clientStore',
				model: 'ClientModel',
				proxy: {
						type: 'memory',
						reader:{
							type: 'json'
						}
				},
				data: clientData
		});

		var menu = Ext.create('Ext.menu.Menu', {
	      plain: true,
	      layout: 'hbox',
	      floating: false,
	      flex: true,
	      style: {
	           overflow: 'visible'
	       },
	      items: [{
	          text: '+Nuevo Cliente',
						xtype: 'button',
						handler: function() {
                window.location = '/client/add';
            }
	      },{
	          text: 'Importar desde excel'
	      },{
	          xtype: 'tbspacer',
						width: '25px'
	      }]

	      //,renderTo: document.body
	      ,region: 'north'
	  });

		var menuButtons = Ext.create('Ext.menu.Menu',{
			plain: true,
			layout: 'hbox',
			floating: false,
			flex: true,
			style: {
					 overflow: 'visible'
			 },
			items: [{
					text: 'Edit',
					xtype: 'button',

			}]
		})


    var grid = Ext.create('Ext.grid.Panel', {
			  //renderTo: document.body,
				region: 'center',
        store:  store,
				plain: false,
				align : 'center',
				width: '85%',
				floating: false,
				style: {
						 overflow: 'visible'
				 },
        columns: [
					{
							//style: 'margin: 1em auto 2em; width: 85%; height:30px;',
	            xtype: 'checkcolumn',
	            dataIndex: 'selected',
							flex : 0
	        },{
            header: 'Name',
            dataIndex: 'name',
						text: 'Name',
						//xtype: 'checkcolumn',
            flex: 1

        }, {
            header: 'Nit',
            dataIndex: 'nit',
						sortable: true
						,flex: 1
        }, {
            header: 'Telephone 01',
            dataIndex: 'tel01',
						sortable: true
						,flex: 1
        }, {
            header: 'Comments',
            dataIndex: 'comment',
						sortable: true
						,flex: 1
        },{
					header: 'Acciones',
					xtype: 'actioncolumn',
					items: [{
								icon: "/images/zoom.png",
								text: "zoom",
								tooltip: "Ver",
								handler: function() {
										console.log(grid.getStore().data.length);
										//var record = grid.getStore().getAt(0);
										//console.log(record.data.name);
										var record = grid.getSelectionModel().getSelected();
												//index = grid.store.indexOf(record);
										console.log(record);
										var pos = grid.getSelectionModel().getSelection();
										console.log(pos);
								}
							},{
								icon: "/images/page_edit.png",
								text: "edit",
								tooltip: "Editar",
								handler: function() {
										window.location = '/client/edit';
								}
							},{
								icon: "/images/delete.png",
								text: "delete",
								tooltip: "Eliminar"
					}],
					flex: 1
				}]
    });


		var spacer = {
									 xtype: 'tbspacer',
									 height: '25px'
								 };

	 Ext.define('Main', {
	     extend: 'Ext.container.Container',
	     xtype: 'app-main'
	     ,items: [spacer,
				 				menu,
								spacer,
				 				grid ]
	 });


	 Ext.application({
	     name: 'Clients',

	     launch : function() {
	         Ext.create("Main", {
	             renderTo : Ext.getBody()
	         });
	     }
	 });


</script>
